{% extends 'base.html' %}
{% block title %}{{ book.title }} - Bookstore{% endblock %}
{% block content %}
<h1 class="page-title">{{ book.title }}</h1>
<div class="card">
    <div class="card-body">
        <p class="mb-2"><strong>Tác giả:</strong> {{ book.author }}</p>
        <p class="mb-2"><strong>Giá:</strong> ${{ book.price }}</p>
        <p class="mb-3"><strong>Tồn kho:</strong> {{ book.stock_quantity }}</p>
        <div class="btn-action-group mb-3">
            {% if book.stock_quantity > 0 %}
            <a href="{% url 'add_to_cart' book.id %}" class="btn btn-success">Thêm vào giỏ</a>
            <a href="{% url 'buy_now' book.id %}" class="btn btn-warning">Mua ngay</a>
            {% else %}
            <button class="btn btn-secondary" disabled>Hết hàng</button>
            {% endif %}
            <a href="{% url 'book_list' %}" class="btn btn-outline-secondary">Về danh sách</a>
        </div>
        <hr>
        <h5 class="mb-2">Đánh giá sách</h5>
        <form method="POST" action="{% url 'add_rating' %}" class="d-flex flex-wrap align-items-center gap-2">
            {% csrf_token %}
            <input type="hidden" name="book_id" value="{{ book.id }}">
            <select name="score" class="form-select w-auto" style="max-width: 80px;">
                <option value="1">1 sao</option>
                <option value="2">2 sao</option>
                <option value="3">3 sao</option>
                <option value="4">4 sao</option>
                <option value="5">5 sao</option>
            </select>
            <button type="submit" class="btn btn-primary">Gửi đánh giá</button>
        </form>
    </div>
</div>
{% endblock %}
